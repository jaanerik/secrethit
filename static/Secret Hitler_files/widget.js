(function(){var t={}.hasOwnProperty,e=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};null==window.blackbox&&(window.blackbox={widgets:function(){function n(){}var r,o,a,i,c,d;return n,a=void 0,c=void 0,d=void 0,o=!1,i=!1,n.load=function(){return null==a&&(a=new r),a.load()},r=function(){function n(){}var r,a,l,u,s,m,p,h,f,g,b,v,w,y,x,k,C,A,E,N,S,L,O;return a={widget:".blackbox-widget",widgetCard:"[data-widget=card]",widgetCartBtn:"[data-widget=cart]",widgetCartFooter:"[data-widget=cart_footer]",checkoutOpen:".blackbox-widget-checkout-open",multivariant:".blackbox-widget-multivariant",stylesheet:"#blackbox-widget-styles"},r=["color","country","product","quantity","stealthy","hidepromo","widget"],l=a.widget+" {\n  display: inline-block !important;\n  position: relative !important;\n  width: 288px !important;\n  height: 60px !important;\n  background: transparent !important;\n}\n\n"+a.widgetCartFooter+" {\n  display: block !important;\n  position: fixed !important;\n  bottom: 0 !important;\n  width: 100% !important;\n  height: 60px !important;\n  max-height: 100% !important;\n  z-index: 999999 !important;\n  margin: 0 !important;\n}\n\n"+a.widget+" iframe {\n  position: absolute !important;\n  left: 0 !important;\n  bottom: 0 !important;\n  width: inherit !important;\n  visibility: hidden !important;\n}\n\n"+a.widget+" iframe[data-blackbox-rendered=true] {\n  visibility: visible !important;\n}\n\n"+a.widgetCard+" iframe {\n  width: 312px !important;\n  left: -12px !important;\n  max-width: none !important;\n}\n\n"+a.widgetCartBtn+" iframe {\n  height: 60px !important;\n}\n\n"+a.checkoutOpen+" {\n  position: absolute !important;\n  width: 100% !important;\n  height: 100% !important;\n  overflow: hidden !important;\n}\n\nbody"+a.checkoutOpen+" > "+a.widgetCartFooter+",\nbody"+a.checkoutOpen+" > "+a.widgetCartFooter+" iframe {\n  height: 100% !important;\n  position: absolute !important;\n}\n\n"+a.widgetCartBtn+a.multivariant+",\n"+a.widgetCartBtn+a.multivariant+" iframe {\n  width: 312px !important;\n  height: 140px !important;\n}",n.prototype.load=function(){return m(v)},v=function(){var t,e,n,r,o,i,l,s,m;if(document.addEventListener&&(d=g(),c=b(),p(),o=document.querySelectorAll(a.widget+":not("+a.widgetCartFooter+")"),o.length)){for(n=o.length>1?"cart":"card",e=o[0].getAttribute("data-color"),t=y(o,"data-country"),m=y(o,"data-widget",n),"cart"===m?u(t,e):C(),l=i=0,s=o.length;i<s;l=++i)r=o[l],r.offsetWidth>0&&r.offsetHeight>0&&function(t,e){O(t,e)}(r,l);return window.addEventListener("message",k,!1),h(document,"initialized")}},O=function(t,e){var n,r,o,a,i,l,u,s,m;for(null==e&&(e=0),s=t.getAttribute("data-widget"),i=f({},x(t),{sort_order:e,origin:c,session_id:d}),m=document.createElement("span"),l=t.attributes,r=0,a=l.length;r<a;r++){n=l[r];try{"href"!==(u=n.nodeName)&&"title"!==u&&m.setAttribute(n.nodeName,n.value)}catch(t){t}}return o=document.createElement("iframe"),f(o,{src:"https://shop.blackbox.cool/checkout?"+N(i),scrolling:"no",frameBorder:0,allowTransparency:!0,width:"100%",height:"100%"}),"cart_footer"===s&&o.setAttribute("title","Cart"),o.onload=function(){return this.setAttribute("data-blackbox-rendered",!0),h(o,"loaded",i)},m.appendChild(o),t.parentNode.replaceChild(m,t)},p=function(){var t;if(t=document.querySelector(a.stylesheet)||document.createElement("style"),t.id=a.stylesheet.slice(1),t.innerHTML=l,!t.parentNode)return document.head.appendChild(t)},u=function(t,e){var n;return n=document.querySelector(a.widgetCartFooter)||document.createElement("span"),s(n,a.widget.slice(1)),n.setAttribute("data-widget","cart_footer"),n.parentNode||document.body.appendChild(n),t?n.setAttribute("data-country",t):n.removeAttribute("data-country"),e?n.setAttribute("data-color",e):n.removeAttribute("data-color"),O(n)},C=function(){var t;if(t=document.querySelector(a.widgetCartFooter))return document.body.removeChild(t)},k=function(t){var e,n,r;try{switch(e=JSON.parse(t.data),e.name){case"blackbox.progress":return h(document,"progress."+e.params.step+(e.params.success?".success":".error"),e.params.extraData);case"blackbox.resize":return E(t,e.params);case"blackbox.multivariant":return w(t);case"blackbox.cart":return h(document,"cartchanged",e.params);case"blackbox.ordercomplete":return h(document,"ordercomplete",e.params);case"blackbox.unavailable":return((null!=(n=e.params)?n.all_products:void 0)||"*"===(null!=(r=e.params)?r.product_ids:void 0))&&h(document,"progress.countryselected.error"),S(t,e.params);case"blackbox.updatetitle":return L(e.params)}}catch(t){t}},w=function(t){var e,n,r,o,i;for(o=document.querySelectorAll(a.widget+" iframe"),i=[],n=0,r=o.length;n<r;n++)e=o[n],e.contentWindow===t.source?i.push(s(e.parentNode,a.multivariant.slice(1))):i.push(void 0);return i},E=function(t,e){var n,r,c,d,l;for(d=document.querySelectorAll(a.widget+" iframe"),l=[],r=0,c=d.length;r<c;r++){if(n=d[r],n.contentWindow===t.source){setTimeout(function(){var t,r;"cart_footer"===e.widgetType&&(t=a.checkoutOpen.slice(1),e.open?(s(document.body,t),null!==(r=document.body.parentNode.getAttribute("style"))&&void 0!==r&&-1!==r.indexOf(" min-height: 100vh;")||document.body.parentNode.setAttribute("style",(r||"")+" min-height: 100vh;")):(n.blur(),A(document.body,t),null!==(r=document.body.parentNode.getAttribute("style"))&&void 0!==r&&r.indexOf(" min-height: 100vh;")>-1&&document.body.parentNode.setAttribute("style",r.replace(" min-height: 100vh;","").trim()))),n.style.height=e.height+"px";try{n.getBoundingClientRect().top<0&&n.scrollIntoView()}catch(t){}if(o!==e.active||i!==e.open)return o=e.active,i=e.open,h(n,"statechanged",{active:o,open:i})});break}l.push(void 0)}return l},S=function(t,e){var n,r,o,i,c,d,l,u,s;if(null!=e?e.product_ids:void 0){if("*"===e.product_ids)r=document.querySelectorAll(a.widget+" iframe");else for(r=[],u=e.product_ids,o=0,d=u.length;o<d;o++){i=u[o];try{r.push(document.querySelector(a.widget+"[data-product="+i+"] iframe"))}catch(t){t}}if(null!=r?r.length:void 0){for(s=[],c=0,l=r.length;c<l;c++)n=r[c],s.push(h(n,"unavailable"));return s}}},L=function(t){var e;try{return e=document.querySelector(a.widget+"[data-product="+t.id+"] iframe"),e.setAttribute("title",t.title)}catch(t){t}},s=function(t,e){return t.classList?t.classList.add(e):t.className+=" "+e},A=function(t,e){return t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},x=function(t){var e,n,o,a,i,c,d;for(i={},c=/^data\-(.+)$/,d=t.attributes,n=0,a=d.length;n<a;n++)e=d[n],(o=c.test(e.nodeName)&&e.nodeName.match(c)[1])&&r.indexOf(o)>-1&&(i[o]=e.value);return i},N=function(e){var n,r,o;r=[];for(n in e)t.call(e,n)&&(o=e[n],r.push(encodeURIComponent(n)+"="+encodeURIComponent(o)));return r.join("&")},f=function(t){var e,n,r,o,a,i;for(null==t&&(t={}),a=Array.prototype.slice.call(arguments,1),e=0,r=a.length;e<r;e++){o=a[e],null==o&&(o={});for(n in o)i=o[n],t[n]=i}return t},y=function(t,n,r){var o,a,i,c,d,l,u;for(u=[],i=0,d=t.length;i<d;i++)o=t[i],a=o.getAttribute(n),e.call(u,a)<0&&u.push(a);if(1===u.length&&u[0])return u[0];for(c=0,l=t.length;c<l;c++)o=t[c],r?o.setAttribute(n,r):o.removeAttribute(n);return r},g=function(t){var e,n;for(null==t&&(t=64),n="";n.length<t&&t>0;)e=Math.random(),n+=e<.1?Math.floor(100*e):String.fromCharCode(Math.floor(26*e)+(e>.5?97:65));return n},b=function(){var t;return(t=document.querySelector("meta[name=blackbox-origin]"))&&t.getAttribute("content")||location.hostname},h=function(t,e,n){var r,o,a;null==n&&(n={}),o="blackbox.widgets."+e,a={bubbles:!0,cancelable:!0,detail:n};try{r=new CustomEvent(o,a)}catch(t){t,r=document.createEvent("CustomEvent"),r.initCustomEvent(o,a.bubbles,a.cancelable,a.detail)}return t.dispatchEvent(r)},function(t){if(console&&console.log)return console.log("Blackbox Widget: "+t)},m=function(t){var e,n,r,o,a,i,c,d,l,u;if(r=!1,l=!0,u=window,n=u.document,d=n.documentElement,e=n.addEventListener?"addEventListener":"attachEvent",c=n.addEventListener?"removeEventListener":"detachEvent",i=n.addEventListener?"":"on",o=function(e){if("readystatechange"!==e.type||"complete"===n.readyState)return("load"===e.type&&u||n)[c](i+e.type,o,!1),!r&&(r=!0)?t.call(u,e.type||e):void 0},a=function(){try{d.doScroll("left")}catch(t){t,setTimeout(a,50)}return o("poll")},"complete"===n.readyState)return t.call(u,"lazy");if(n.createEventObject&&d.doScroll){try{l=!u.frameElement}catch(t){}l&&a()}n[e](i+"DOMContentLoaded",o,!1),n[e](i+"readystatechange",o,!1),u[e](i+"load",o,!1)},n}(),n}()}),blackbox.widgets.load()}).call(this);